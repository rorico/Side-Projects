chrome.runtime.getBackgroundPage(function(e){function r(e,r){var o=u(r);if(d=new Date,t(r,d)&&(f=50*!p,$(e).prepend("<div id='nowHolder'><div id='now'></div></div>"),clearTimeout(v),n()),o.length){a(e,"placeholder placeborder",0,1);for(var s=o[0][0][1]-g-1;s>100;)a(e,"placeholder placeborder",100,1),s-=100;a(e,"placeholder",s,0);for(var i=0;i<o.length;i++){var l=o[i][0][1],c=o[i][0][2],m=o[i][3],A=o[i][2][0],y=o[i][2][1],C=o[i][1],T=c-l+1,k=[A+(p?"":" "+y)+" - "+m,C];a(e,"class "+m,T,2,k);for(var w,b=c,M=i===o.length-1?h:M=o[i+1][0][1]-1;(w=100*Math.floor((b+100)/100))<=M;)s=w-b,a(e,"placeholder placeborder",s,1),b+=s;a(e,"placeholder",M-b,0)}}else a(e,"class",h-g,1,["No Classes Today"]);$(e).parent().append("<div id='side'></div>")}function a(e,r,a,t,n){var o=a/2,s=o+A-t;A=s%1,s=Math.floor(s);var i="";n&&n.length&&(i="<p style='top:"+(s-15.2*n.length)/2+"px'>"+n.join("<br />")+"</p>"),$(e).append("<div class='"+r+"' style='height:"+s+"px'>"+i+"</div>")}function t(e,r){var a=new Date(e),t=new Date(r);return a.getDate()==t.getDate()&&a.getMonth()==t.getMonth()&&a.getYear()==t.getYear()}function n(){if($("#now").size())if(d=new Date,d.getHours()<g/100||d.getHours()>=h/100)$("#now").css("display","none");else{var e=d.getHours()+":"+("0"+d.getMinutes()).slice(-2)+"AM";d.getHours()<13?12==d.getHours()&&(e=d.getHours()+":"+("0"+d.getMinutes()).slice(-2)+"PM"):e=d.getHours()-12+":"+("0"+d.getMinutes()).slice(-2)+"PM";var r=Math.floor(50*(d.getHours()-g/100)+d.getMinutes()/1.2);$("#now").css("display","block"),$("#now").text(e),$("#nowHolder").css("top",r),$("#nowHolder").css("left",-f);var a=6e4-1e3*d.getSeconds()-d.getMilliseconds();v=setTimeout(function(){n()},a)}}function o(){var e=$("#datepicker").datepicker("getDate");p=!p,p?($("#showWeek").val("Show Day"),m(e)):($("#showWeek").val("Show Week"),c(e))}function s(){var e=$("#datepicker").datepicker("getDate");p?(e.setDate(e.getDate()+7),m(e)):(e.setDate(e.getDate()+1),c(e)),$("#datepicker").datepicker("setDate",e)}function i(){var e=$("#datepicker").datepicker("getDate");p?(e.setDate(e.getDate()-7),m(e)):(e.setDate(e.getDate()-1),c(e)),$("#datepicker").datepicker("setDate",e)}function l(){d=new Date,$("#datepicker").datepicker("setDate",d),p?m(d):c(d)}function c(e){$("#container").empty(),$("#container").append("<div id='currentDay' class='day'></div>"),r("#currentDay",e)}function m(e){$("#container").empty();var a=e.getDay()-1;e.setDate(e.getDate()-a);for(var t=0;5>t;t++)$("#container").append("<div id='D"+t+"' class='day'></div>"),r("#D"+t,e),e.setDate(e.getDate()+1);var o=$("#calendar").width();$(".class").width((o-100)/5-2),$(".placeholder").width((o-100)/5),$("#now").width((o-100)/5),n()}var u=e.todaySchedule,d=new Date,g=700,h=1900,f=50,p=!1,A=0,v=-1;$("#datepicker").datepicker({onSelect:function(){p?m($("#datepicker").datepicker("getDate")):c($("#datepicker").datepicker("getDate"))},dateFormat:"DD MM d, yy"}),$("#datepicker").datepicker("setDate",d),r("#currentDay",d),$(window).keydown(function(e){switch(e.keyCode){case 78:l();break;case 77:o();break;case 188:i();break;case 190:s()}}),$("#showWeek").click(o),$("#next").click(s),$("#prev").click(i)});