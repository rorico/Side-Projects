chrome.runtime.getBackgroundPage(function(e){function t(e,t){var n=p(t);if(g=new Date,r(t,g)&&(k=50*!v,$(e).prepend("<div id='nowHolder'><div id='now'></div></div>"),clearTimeout(w),i()),n.length){a(e,"placeholder placeborder",0);for(var c=n[0][0][1]-D-1;c>100;)a(e,"placeholder placeborder",100),c-=100;a(e,"placeholder",c);for(var o=0;o<n.length;o++){var d=n[o][0][1],s=n[o][0][2],l=n[o][3],h=n[o][2][0],f=n[o][2][1],y=n[o][1],M=s-d+1,H=[h+(v?"":" "+f)+" - "+l,y];a(e,"class "+l,M,H);for(var b,m=s,S=o===n.length-1?u:S=n[o+1][0][1]-1;(b=100*Math.floor((m+100)/100))<=S;)c=b-m,a(e,"placeholder placeborder",c),m+=c;a(e,"placeholder",S-m)}}else a(e,"class",u-D,["No Classes Today"]);$(e).parent().append("<div id='side'></div>")}function a(e,t,a,r){var i=a/2,n=i+h;h=n%1,n=Math.floor(n);var c="";r&&r.length&&(c="<p style='top:"+(n-15.2*r.length)/2+"px'>"+r.join("<br />")+"</p>"),$(e).append("<div class='"+t+"' style='height:"+n+"px'>"+c+"</div>")}function r(e,t){var a=new Date(e),r=new Date(t);return a.getDate()==r.getDate()&&a.getMonth()==r.getMonth()&&a.getYear()==r.getYear()}function i(){if($("#now").size())if(g=new Date,g.getHours()<D/100||g.getHours()>=u/100)$("#now").css("display","none");else{var e=g.getHours()+":"+("0"+g.getMinutes()).slice(-2)+"AM";g.getHours()>=13?e=g.getHours()-12+":"+("0"+g.getMinutes()).slice(-2)+"PM":12==g.getHours()&&(e=g.getHours()+":"+("0"+g.getMinutes()).slice(-2)+"PM");var t=Math.floor(50*(g.getHours()-D/100)+g.getMinutes()/1.2);$("#now").css("display","block"),$("#now").text(e),$("#nowHolder").css("top",t),$("#nowHolder").css("left",-k);var a=6e4-1e3*g.getSeconds()-g.getMilliseconds();w=setTimeout(function(){i()},a)}}function n(){var e=$("#datepicker").datepicker("getDate");v=!v,v?($("#showWeek").val("Show Day"),l(e)):($("#showWeek").val("Show Week"),s(e))}function c(){var e=$("#datepicker").datepicker("getDate");v?(e.setDate(e.getDate()+7),l(e)):(e.setDate(e.getDate()+1),s(e)),$("#datepicker").datepicker("setDate",e)}function o(){var e=$("#datepicker").datepicker("getDate");v?(e.setDate(e.getDate()-7),l(e)):(e.setDate(e.getDate()-1),s(e)),$("#datepicker").datepicker("setDate",e)}function d(){g=new Date,$("#datepicker").datepicker("setDate",g),v?l(g):s(g)}function s(e){$("#container").empty(),$("#container").append("<div id='currentDay' class='day'></div>"),t("#currentDay",e)}function l(e){$("#container").empty();var a=e.getDay()-1;e.setDate(e.getDate()-a);for(var r=0;r<5;r++)$("#container").append("<div id='D"+r+"' class='day'></div>"),t("#D"+r,e),e.setDate(e.getDate()+1);var n=$("#calendar").width();$(".class").width((n-100)/5-2),$(".placeholder").width((n-100)/5),$("#now").width((n-100)/5),i()}var p=e.todaySchedule,g=new Date,D=700,u=1900,k=50,v=!1,h=0,w=-1;$("#datepicker").datepicker({onSelect:function(e){v?l($("#datepicker").datepicker("getDate")):s($("#datepicker").datepicker("getDate"))},dateFormat:"DD MM d, yy"}),$("#datepicker").datepicker("setDate",g),t("#currentDay",g),$(window).keydown(function(e){switch(e.keyCode){case 78:d();break;case 77:n();break;case 188:o();break;case 190:c()}}),$("#showWeek").click(n),$("#next").click(c),$("#prev").click(o)});