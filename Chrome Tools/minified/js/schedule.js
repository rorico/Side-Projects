chrome.runtime.getBackgroundPage(function(e){function t(e,t){var r=l(t);if(h=new Date,a(t,h)&&(f=50*!u,$(e).prepend("<div id='nowHolder'><div id='now'></div></div>"),i()),0===r.length)$(e).append("<div class='class' style='height:599px'><p style='top:285px'>No Classes Today</p></div>");else{for(var n="<div class='placeholder placeborder' style='height:0px'></div>",s=(r[0][0][1]-v)/2;s>50;)n+="<div class='placeholder placeborder' style='height:49px'></div>",s-=50;n+="<div class='placeholder' style='height:"+(s-1)+"px'></div>";for(var c=0;c<r.length;c++){var o=r[c][0][1],d=r[c][0][2],m=r[c][5],k=r[c][4][0],g=r[c][4][1],w=r[c][1],y=(d-o)/2-2+1;n+="<div class='class "+m+"' style='max-height:"+y+"px;height:"+y+"px'><p style='top:"+(y-30.4)/2+"px'>",n+=u?k+" - "+m+"<br />"+w:k+" "+g+" - "+m+"<br />"+w,n+="</p></div>";var D=d,b=p;c!=r.length-1&&(b=r[c+1][0][1]);for(var L;(L=100*Math.floor((D+100)/100))<=b;)s=L-D,n+="<div class='placeholder placeborder' style='height:"+(s/2-1)+"px'></div>",D+=s;n+="<div class='placeholder' style='height:"+((b-D)/2-1)+"px'></div>"}$(e).append(n)}$(e).parent().append("<div id='side'></div>")}function a(e,t){var a=new Date(e),i=new Date(t);return a.getDate()==i.getDate()&&a.getMonth()==i.getMonth()&&a.getYear()==i.getYear()}function i(){if($("#now").size()>0){h=new Date;var e=60-h.getSeconds(),t=50*(h.getHours()-7)+h.getMinutes()/1.2;if(h.getHours()<19&&h.getHours()>6){var a=h.getHours()+":"+("0"+h.getMinutes()).slice(-2)+"AM";h.getHours()<13?12==h.getHours()&&(a=h.getHours()+":"+("0"+h.getMinutes()).slice(-2)+"PM"):a=h.getHours()-12+":"+("0"+h.getMinutes()).slice(-2)+"PM",$("#now").css("display","block"),$("#now").text(a),$("#nowHolder").css("top",t),$("#nowHolder").css("left",-f)}else $("#now").css("display","none");setTimeout(function(){i()},1e3*e)}}function r(){var e=$("#datepicker").datepicker("getDate");u=!u,u?($("#showWeek").val("Show Day"),d(e)):($("#showWeek").val("Show Week"),o(e))}function n(){var e=$("#datepicker").datepicker("getDate");u?(e.setDate(e.getDate()+7),d(e)):(e.setDate(e.getDate()+1),o(e)),$("#datepicker").datepicker("setDate",e)}function s(){var e=$("#datepicker").datepicker("getDate");u?(e.setDate(e.getDate()-7),d(e)):(e.setDate(e.getDate()-1),o(e)),$("#datepicker").datepicker("setDate",e)}function c(){h=new Date,$("#datepicker").datepicker("setDate",h),u?d(h):o(h)}function o(e){$("#container").empty(),$("#container").append("<div id='currentDay' class='day'></div>"),t("#currentDay",e)}function d(e){$("#container").empty();var a=e.getDay()-1;e.setDate(e.getDate()-a);for(var r=0;5>r;r++)$("#container").append("<div id='D"+r+"' class='day'></div>"),t("#D"+r,e),e.setDate(e.getDate()+1);var n=$("#calendar").width();$(".class").width((n-100)/5-2),$(".placeholder").width((n-100)/5),$("#now").width((n-100)/5),i()}var l=e.todaySchedule,h=new Date,v=700,p=1900,f=50,u=!1;$("#datepicker").datepicker({onSelect:function(){u?d($("#datepicker").datepicker("getDate")):o($("#datepicker").datepicker("getDate"))},dateFormat:"DD MM d, yy"}),$("#datepicker").datepicker("setDate",h),t("#currentDay",h),$(window).keydown(function(e){switch(e.keyCode){case 78:c();break;case 77:r();break;case 188:s();break;case 190:n()}}),$("#showWeek").click(r),$("#next").click(n),$("#prev").click(s)});