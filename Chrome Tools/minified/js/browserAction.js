chrome.runtime.getBackgroundPage(function(t){function e(t,e,n,i,a){function r(){c.state=2;for(var e=$("<div></div>"),n=0;n<t.length;n++){var a;if(i){if(!t[n][1])continue;a=t[n][0]}else a=t[n];var r=$("<div class='log block'>"+a+"</div>");o(r,n),e.append(r),c.cnt++}u.html(e),u.outerWidth($("body").width()-20)}function o(t,e){t.click(function(t){t.stopPropagation(),a(e),this.remove(),c.cnt--,c.cnt||s()})}function s(){c.state=0,u.remove()}var c={list:t,cnt:0,state:1,destructor:s,restart:r},l="";"right"===n&&(l=" right");var u=$("<div class='topButton block"+l+"'>"+e+"</div>");return $("body").prepend(u),u.width(u.height()),u.click(function(){1===c.state?r():2===c.state&&(c.state=1,u.html(e),u.width(u.height()))}),c}function n(){var t=g.allLogs,n=g.numUnread;n&&e(t,"!","left",!0,function(t){d("removeLog",A)})}function i(){var t=g.youtubeVideoNames;x?(x.list=t,t.length?2===x.state&&x.restart():(x.destructor(),x=null)):t.length&&(x=e(t,"&#9658;","right",!1,function(t){d("youtube",t)}))}function a(){var t=+$("#setTimer").val();s(t)}function r(t){var e=new Date;e-D<1e3?(P+=t.toFixed(0),P.length>3&&(P=P.substring(1)),$("#setTimer").val(P)):(P=t,$("#setTimer").val(P)),D=new Date}function o(){s(+$("#setTimer").val())}function s(t){d("setAlarm",t)}function c(t){t>=0&&t<5&&d("removeAlarm",t)}function l(){d("stopAllAlarms")}function u(){d("snooze")}function m(){d("youtube")}function d(t,e){chrome.runtime.sendMessage({from:"browserAction",action:t,input:e})}function v(t,e,n){var i=t.toLocaleTimeString();$("#alarmText"+e).html("Alarm at "+i),$("#alarm"+e).removeClass("notSet").css({color:k[n],"border-color":k[n]}).bind("click",function(){c(e)})}function f(t,e){$("#alarmText"+t).html("Not Set").css("visibility","visible"),clearInterval(b[t]),$("#alarm"+t).addClass("notSet").unbind("click").css({color:p,"border-color":p})}function h(t){var e="hidden";b[t]=setInterval(function(){e="hidden"===e?"visible":"hidden",$("#alarmText"+t).css("visibility",e)},300)}for(var b=[],g=t,k=t.typeColors,p=t.defaultColor,y=g.alarms,T=g.numMaxAlarms,w="",A=0;A<T;A++)w+="<div id='alarm"+A+"' class='alarm notSet'><div class='alarmTitle'>"+(A+1)+"</div><div id='alarmText"+A+"' class='alarmData'>Not Set</div></div>";$("#alarms").html(w);for(var A=0;A<y.length;A++){var L=y[A];L&&L.state&&(v(L.alarmTime,A,L.type),2==L.state&&h(A))}timeLineInit($("#timeLineH"),g),keyPressInit($("body"),keyPhrases);var S=[["S",o],["A",l],["X",u],["P",m]];addPhrases(S),addNumberListener(function(t){c(t-1)},"D"),addNumberListener(r),n();var x;i(),setTimeout(function(){window.close()},6e4),$("#timerButton").click(a);var D=new Date,P="";chrome.runtime.onMessage.addListener(function(t,e,n){if("background"===t.from)switch(t.action){case"setAlarm":var a=t.input;v(new Date(a[1]),a[0],a[2]);break;case"removeAlarm":var a=t.input;f(a[0],a[1]);break;case"ringing":h(t.input);break;case"youtube":i()}})});