chrome.runtime.getBackgroundPage(function(e){function t(){if(D){var e=$("<div id='logHolder' class='block'>!</div>");$("body").prepend(e),e.width(e.height()),e.one("click",i)}}function i(){for(var e=$("<div id='logs'></div>"),i=0;i<x.length;i++)if(!x[i][1]){var a=$("<div class='log block'>"+x[i][0]+"</div>");n(a,i),e.append(a)}var o=$("#logHolder");o.html(e),o.outerWidth($("body").width()-20),o.one("click",function(){this.remove(),t()})}function n(e,t){e.click(function(e){e.stopPropagation(),this.remove(),v("removeLog",t),D--,D||$("#logHolder").remove()})}function a(){var e=+$("#setTimer").val();l(e)}function o(e){var t=new Date;t-P<1e3?(C+=e.toFixed(0),C.length>3&&(C=C.substring(1)),$("#setTimer").val(C)):(C=e,$("#setTimer").val(C)),P=new Date}function r(){l(+$("#setTimer").val())}function l(e){v("setAlarm",e)}function s(e){e>=0&&e<5&&v("removeAlarm",e)}function c(){v("stopAllAlarms")}function d(){v("snooze")}function m(){v("youtube")}function v(e,t){chrome.runtime.sendMessage({from:"browserAction",action:e,input:t})}function u(e,t,i){var n=e.toLocaleTimeString();$("#alarmText"+t).html("Alarm at "+n),$("#alarm"+t).removeClass("notSet").css({color:k[i],"border-color":k[i]}).bind("click",function(){s(t)})}function f(e,t){$("#alarmText"+e).html("Not Set").css("visibility","visible"),clearInterval(g[e]),$("#alarm"+e).addClass("notSet").unbind("click").css({color:p,"border-color":p})}function h(e){var t="hidden";g[e]=setInterval(function(){t="hidden"===t?"visible":"hidden",$("#alarmText"+e).css("visibility",t)},300)}for(var g=[],b=e,k=e.typeColors,p=e.defaultColor,T=b.alarms,w=b.numMaxAlarms,y="",A=0;A<w;A++)y+="<div id='alarm"+A+"' class='alarm notSet'><div class='alarmTitle'>"+(A+1)+"</div><div id='alarmText"+A+"' class='alarmData'>Not Set</div></div>";$("#alarms").html(y);for(var A=0;A<T.length;A++){var L=T[A];L&&L.state&&(u(L.alarmTime,A,L.type),2==L.state&&h(A))}timeLineInit($("#timeLineH"),b),keyPressInit($("body"),keyPhrases);var S=[["S",r],["A",c],["X",d],["P",m]];addPhrases(S),addNumberListener(function(e){s(e-1)},"D"),addNumberListener(o);var x=b.allLogs,D=b.numUnread;t(),setTimeout(function(){window.close()},6e4),$("#timerButton").click(a);var P=new Date,C="";chrome.runtime.onMessage.addListener(function(e,t,i){if("background"===e.from)switch(e.action){case"setAlarm":var n=e.input;u(new Date(n[1]),n[0],n[2]);break;case"removeAlarm":var n=e.input;f(n[0],n[1]);break;case"ringing":h(e.input)}})});