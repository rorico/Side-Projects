chrome.runtime.getBackgroundPage(function(t){function e(t,e,i,n,a){function r(){l.state=2;var t=$("<div></div>");l.cnt=0;for(var e=0;e<l.list.length;e++){var i;if(n){if(!l.list[e][1])continue;i=l.list[e][0]}else i=l.list[e];var a=$("<div class='log block'>"+i+"</div>");s(a,e),t.append(a),l.cnt++}d.html(t),d.outerWidth($("body").width()-20)}function o(){l.state=1,d.html(e),d.width(d.height())}function s(t,e){t.click(function(t){t.stopPropagation(),a(e),this.remove(),l.cnt--,l.cnt||c()})}function c(){l.state=0,d.remove()}var l={list:t,cnt:0,state:1,destructor:c,restart:r},u="";"right"===i&&(u=" right");var d=$("<div class='topButton block"+u+"'>"+e+"</div>");return $("body").prepend(d),d.width(d.height()),d.click(function(t){t.stopPropagation(),1===l.state?r():2===l.state&&o()}),$("body").click(function(){2===l.state&&o()}),l}function i(){var t=g.allLogs,i=g.numUnread;i&&e(t,"!","left",!0,function(t){m("removeLog",A)})}function n(){var t=g.youtubeVideoNames;x?(x.list=t,t.length?2===x.state&&x.restart():(x.destructor(),x=null)):t.length&&(x=e(t,"&#9658;","right",!1,function(t){m("youtube",t)}))}function a(){var t=+$("#setTimer").val();s(t)}function r(t){var e=new Date;e-D<1e3?(P+=t.toFixed(0),P.length>3&&(P=P.substring(1)),$("#setTimer").val(P)):(P=t,$("#setTimer").val(P)),D=new Date}function o(){s(+$("#setTimer").val())}function s(t){m("setAlarm",t)}function c(t){t>=0&&t<5&&m("removeAlarm",t)}function l(){m("stopAllAlarms")}function u(){m("snooze")}function d(){m("youtube")}function m(t,e){chrome.runtime.sendMessage({from:"browserAction",action:t,input:e})}function v(t,e,i){var n=t.toLocaleTimeString();$("#alarmText"+e).html("Alarm at "+n),$("#alarm"+e).removeClass("notSet").css({color:p[i],"border-color":p[i]}).bind("click",function(){c(e)})}function f(t,e){$("#alarmText"+t).html("Not Set").css("visibility","visible"),clearInterval(b[t]),$("#alarm"+t).addClass("notSet").unbind("click").css({color:k,"border-color":k})}function h(t){var e="hidden";b[t]=setInterval(function(){e="hidden"===e?"visible":"hidden",$("#alarmText"+t).css("visibility",e)},300)}for(var b=[],g=t,p=t.typeColors,k=t.defaultColor,y=g.alarms,T=g.numMaxAlarms,w="",A=0;A<T;A++)w+="<div id='alarm"+A+"' class='alarm notSet'><div class='alarmTitle'>"+(A+1)+"</div><div id='alarmText"+A+"' class='alarmData'>Not Set</div></div>";$("#alarms").html(w);for(var A=0;A<y.length;A++){var L=y[A];L&&L.state&&(v(L.alarmTime,A,L.type),2==L.state&&h(A))}keyPressInit($("body")),timeLineInit($("#timeLineH"),g);var S=[["S",o],["A",l],["X",u],["P",d]];addPhrases(S),addNumberListener(function(t){c(t-1)},"D"),addNumberListener(r),i();var x;n(),setTimeout(function(){window.close()},6e4),$("#timerButton").click(a);var D=new Date,P="";chrome.runtime.onMessage.addListener(function(t,e,i){if("background"===t.from)switch(t.action){case"setAlarm":var a=t.input;v(new Date(a[1]),a[0],a[2]);break;case"removeAlarm":var a=t.input;f(a[0],a[1]);break;case"ringing":h(t.input);break;case"youtube":n()}})});