chrome.runtime.getBackgroundPage(function(t){function e(t,e,i,n,a){function r(){l.state=2;for(var t=$("<div></div>"),e=0;e<l.list.length;e++){var i;if(n){if(!l.list[e][1])continue;i=l.list[e][0]}else i=l.list[e];var a=$("<div class='log block'>"+i+"</div>");o(a,e),t.append(a),l.cnt++}u.html(t),u.outerWidth($("body").width()-20)}function o(t,e){t.click(function(t){t.stopPropagation(),a(e),this.remove(),l.cnt--,l.cnt||s()})}function s(){l.state=0,u.remove()}var l={list:t,cnt:0,state:1,destructor:s,restart:r},c="";"right"===i&&(c=" right");var u=$("<div class='topButton block"+c+"'>"+e+"</div>");return $("body").prepend(u),u.width(u.height()),u.click(function(){1===l.state?r():2===l.state&&(l.state=1,u.html(e),u.width(u.height()))}),l}function i(){var t=g.allLogs,i=g.numUnread;i&&e(t,"!","left",!0,function(t){d("removeLog",A)})}function n(){var t=g.youtubeVideoNames;x?(x.list=t,t.length?2===x.state&&x.restart():(x.destructor(),x=null)):t.length&&(x=e(t,"&#9658;","right",!1,function(t){d("youtube",t)}))}function a(){var t=+$("#setTimer").val();s(t)}function r(t){var e=new Date;e-D<1e3?(P+=t.toFixed(0),P.length>3&&(P=P.substring(1)),$("#setTimer").val(P)):(P=t,$("#setTimer").val(P)),D=new Date}function o(){s(+$("#setTimer").val())}function s(t){d("setAlarm",t)}function l(t){t>=0&&t<5&&d("removeAlarm",t)}function c(){d("stopAllAlarms")}function u(){d("snooze")}function m(){d("youtube")}function d(t,e){chrome.runtime.sendMessage({from:"browserAction",action:t,input:e})}function v(t,e,i){var n=t.toLocaleTimeString();$("#alarmText"+e).html("Alarm at "+n),$("#alarm"+e).removeClass("notSet").css({color:k[i],"border-color":k[i]}).bind("click",function(){l(e)})}function f(t,e){$("#alarmText"+t).html("Not Set").css("visibility","visible"),clearInterval(b[t]),$("#alarm"+t).addClass("notSet").unbind("click").css({color:p,"border-color":p})}function h(t){var e="hidden";b[t]=setInterval(function(){e="hidden"===e?"visible":"hidden",$("#alarmText"+t).css("visibility",e)},300)}for(var b=[],g=t,k=t.typeColors,p=t.defaultColor,y=g.alarms,T=g.numMaxAlarms,w="",A=0;A<T;A++)w+="<div id='alarm"+A+"' class='alarm notSet'><div class='alarmTitle'>"+(A+1)+"</div><div id='alarmText"+A+"' class='alarmData'>Not Set</div></div>";$("#alarms").html(w);for(var A=0;A<y.length;A++){var L=y[A];L&&L.state&&(v(L.alarmTime,A,L.type),2==L.state&&h(A))}timeLineInit($("#timeLineH"),g),keyPressInit($("body"),keyPhrases);var S=[["S",o],["A",c],["X",u],["P",m]];addPhrases(S),addNumberListener(function(t){l(t-1)},"D"),addNumberListener(r),i();var x;n(),setTimeout(function(){window.close()},6e4),$("#timerButton").click(a);var D=new Date,P="";chrome.runtime.onMessage.addListener(function(t,e,i){if("background"===t.from)switch(t.action){case"setAlarm":var a=t.input;v(new Date(a[1]),a[0],a[2]);break;case"removeAlarm":var a=t.input;f(a[0],a[1]);break;case"ringing":h(t.input);break;case"youtube":n()}})});