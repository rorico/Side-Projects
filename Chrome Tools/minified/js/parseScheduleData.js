function parseData(e){for(var t=[],n="University of Waterloo",r="Printer Friendly Page",s=["SEM","TUT","LAB","LEC","TST"],a=e.substring(e.indexOf(n)+n.length,e.indexOf(r)),i=a.split("Exam Information"),u=0;u<i.length-1;u++){for(var l=[],o=i[u].split("\n"),p=[],h=[],f="",g=0;g<o.length;g++){var c=o[g];if(/^[A-Z].+$/.test(c)){var v=c.split(" "),m=v[0]+" "+v[1],d=c.substring(m.length);p=[m,d];break}}for(var g=0;g<o.length;g++){for(var T=0;T<s.length;T++)if(o[g]==s[T]){h.length&&(l.push([f,h]),h=[]),f=s[T];break}/^[MTWTFh]{1,6} \d{1,2}:.+$/.test(o[g])&&(h.push([getClassLength(o[g]),o[g+1],parseDate(o[g+3])]),g+=4)}h.length&&(l.push([f,h]),h=[]),t.push([p,l])}return t}function parseDate(e){for(var t=[],n=e.split(" - "),r=0;r<n.length;r++){var s=n[r].split("/");1==r?t.push(+new Date(s[2],s[0]-1,s[1],23,59,59,999)):t.push(+new Date(s[2],s[0]-1,s[1]))}return t}function getClassLength(e){var t=e.split(" "),n=parseTime(t[1]),r=parseTime(t[3]);return[t[0],n,r]}function parseTime(e){var t=e.split(":"),n=t[0]-0;return t[1].indexOf("PM")>-1&&"12"!=n&&(n+=12),minutes=t[1].slice(0,-2)-0,60*n+minutes}function sendRequest(e,t){chrome.runtime.sendMessage({from:"options",action:e,input:t})}$("#convert").click(function(){var e=$("#input").val();chrome.storage.sync.set({scheduleInfo:parseData(e)}),sendRequest("resetSchedule"),$("#input").val("")});