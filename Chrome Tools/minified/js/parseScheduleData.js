function parseData(e){for(var t=[],a="University of Waterloo",i="Printer Friendly Page",r=["SEM","TUT","LAB","LEC"],n=e.substring(e.indexOf(a)+a.length,e.indexOf(i)),s=n.split("Exam Information"),o=0;o<s.length;o++){for(var c=[],l=s[o].split("\n"),d=[],h="",p=0;p<l.length;p++){var v=l[p];if(/^[A-Z].+$/.test(v)){for(var u=v.split(" "),f=u[0]+" "+u[1],g="",m=2;m<u.length-1;m++)g+=u[m]+" ";g+=u[u.length-1],d=[f,g];break}}for(var p=0;p<l.length;p++){for(var $=0;$<r.length;$++)if(l[p]==r[$]){h=r[$];break}/^[MTWTFh]{1,6} \d{1,2}:.+$/.test(l[p])&&(c.push([getClassLength(l[p]),l[p+1],l[p+2],parseDate(l[p+3]),d,h]),p+=4)}t.push(c)}return t}function parseDate(e){for(var t=[],a=e.split(" - "),i=0;i<a.length;i++){var r=a[i].split("/");t.push(1==i?+new Date(r[2],r[0]-1,r[1],23,59,59,999):+new Date(r[2],r[0]-1,r[1]))}return t}function getClassLength(e){var t=e.split(" "),a=parseTime(t[1]),i=parseTime(t[3]);return[t[0],a,i]}function parseTime(e){var t=e.split(":"),a=t[0],i=100*a;return t[1].indexOf("PM")>-1&&"12"!=t[0]&&(i+=1200),t[1]=t[1].slice(0,-2),i+=t[1]/.6}$("#convert").click(function(){var e=$("#input").val();chrome.storage.sync.set({scheduleInfo:parseData(e)}),$("#input").val("")});