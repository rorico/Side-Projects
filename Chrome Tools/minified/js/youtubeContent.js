function youtubeNewPage(){p=window.document.getElementsByTagName("video")[0],p&&(p.onended=function(){inAd?inAd=!1:sendRequest("youtubeEnd")}),inAd=!!document.getElementsByClassName("videoAdUi")[0],adSkip=document.getElementsByClassName("videoAdUiSkipButton")[0]}function skipAd(){return!!adSkip&&(adSkip.click(),inAd=!1,!0)}function pause(){return!p.paused&&(p.pause(),!0)}function play(){return!!p.paused&&(p.play(),!0)}function getState(){return inAd&&adSkip?"ad":p.paused?"pause":"play"}function sendRequest(e,n){chrome.runtime.sendMessage({from:"content",action:e,input:n})}var p,adSkip,inAd;youtubeNewPage(),document.addEventListener("transitionend",function(e){"progress"===e.target.id&&youtubeNewPage()}),chrome.runtime.onMessage.addListener(function(e,n,t){switch(e.action){case"pause":t(pause());break;case"play":t(play());break;case"skipAd":t(skipAd());break;case"getState":t(getState())}});