var keyPressInit,addPhrase,addPhrases,addNumberListener;!function(){function e(e,a){for(var s="<div id='phraseFront'>",d="<div id='phraseBack'>",t=0;t<e.length;t++)s+="<div id='phrase"+t+"' class='phrasePart'>"+e[t]+"</div>",d+="<div class='phrasePart'>"+e[t]+"</div>";s+="</div>",d+="</div>";var o="<div id='phrase'>"+s+d+"</div>",n=$(i),h=n.parent();n.html(o);var f=100,l=40,c=h.width()-l;c<n.width()&&(f=Math.floor(f/(n.width()/c)),$(".phrasePart").css("font-size",f));var v=(h.innerWidth()-n.outerWidth())/2,p=(h.innerHeight()-n.outerHeight())/2;n.css("left",v).css("top",p),a&&$("#phrase0").addClass("filled"),r(1200)}function a(e,a){a?($("#phrase"+e).addClass("filled").removeClass("failed"),r(1200)):($("#phrase"+e).addClass("failed"),r(800))}function r(e){if(clearInterval(l),clearTimeout(c),e>0){var a=.8;if($("#phrase").css("opacity",a),!f){var r=500;c=setTimeout(function(){if(e>r){var d=(e-r)/a/100;l=setInterval(function(){a-=.01,$("#phrase").css("opacity",a),a<=0&&(clearInterval(l),s())},d)}else s()},r)}}else s()}function s(){$("#phrase").remove(),n=0,h=0,f=!1}function d(a,r){for(var s="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0;i<r;i++)s+=d.charAt(Math.floor(Math.random()*d.length));n=[s,a],f=!0,e(s,!1)}var i="#chromeTools_keyPress",t=[],o=[],n=0,h=0,f=!1;keyPressInit=function(i){t=[],i.prepend("<div id='chromeTools_keyPress'></div>"),i.attr("tabindex",1).keydown(function(i){if(i.stopPropagation(),n)if(i.keyCode===n[0].charCodeAt(h)){if(a(h,!0),++h===n[0].length){$("#phrase").addClass("done");var l=n[1],c=n[2];s(),c?d(l,c):l(),r(1200)}}else 27===i.keyCode||13===i.keyCode?r():(a(h,!1),f||s());else{for(var v=!1,p=0;p<t.length;p++)if(i.keyCode===t[p][0].charCodeAt(0)){1===t[p][0].length?t[p][1]():(n=t[p],e(t[p][0],!0),h=1),v=!0;break}if(!v){var u;if(u=i.keyCode-48,i.keyCode>=48&&i.keyCode<=57||(u=i.keyCode-96,i.keyCode>=96&&i.keyCode<=105)){for(var p=0;p<o.length;p++)if(!o[p][2]){o[p][0](u);break}}else for(var p=0;p<o.length;p++)if(o[p][1]&&i.keyCode===o[p][1].charCodeAt(0)){o[p][2]=0;break}}}}).keyup(function(e){for(var a=0;a<o.length;a++)if(o[a][1]&&e.keyCode===o[a][1].charCodeAt(0)){o[a][2]=1;break}})},addPhrase=function(e,a,r){t.push([e,a,r])},addPhrases=function(e){t=t.concat(e)},addNumberListener=function(e,a){a?o.push([e,a,1]):o.push([e])};var l,c}();