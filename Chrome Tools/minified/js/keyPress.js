var keyPressInit,addPhrase,addPhrases,addNumberListener;!function(){function e(e,r){for(var s="<div id='phraseFront'>",o="<div id='phraseBack'>",t=0;t<e.length;t++)s+="<div id='phrase"+t+"' class='phrasePart'>"+e[t]+"</div>",o+="<div class='phrasePart'>"+e[t]+"</div>";s+="</div>",o+="</div>";var d="<div id='phrase'>"+s+o+"</div>",i=$("#chromeTools_keyPress"),n=i.parent();i.html(d);var h=100,f=40,c=n.width()-f;c<$("#phraseFront").width()&&(h=Math.floor(h/($("#phraseFront").width()/c)),$(".phrasePart").css("font-size",h));var l=(n.innerWidth()-$("#phraseFront").outerWidth())/2,v=(n.innerHeight()-$("#phraseFront").outerHeight())/2;$("#chromeTools_keyPress").css("left",l).css("top",v),r&&$("#phrase0").addClass("filled"),a(1200)}function r(e,r){r?($("#phrase"+e).addClass("filled").removeClass("failed"),a(1200)):($("#phrase"+e).addClass("failed"),a(500))}function a(e){var r=.8,a=e?e/r/100:15;$("#phrase").css("opacity",r),clearInterval(f),h||(f=setInterval(function(){r-=.01,$("#phrase").css("opacity",r),r<=0&&s()},a))}function s(){i=0,n=0,h=!1}function o(r){for(var a="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=0;o<18;o++)a+=s.charAt(Math.floor(Math.random()*s.length));i=[a,r],h=!0,e(a,!1)}var t=[],d=[],i=0,n=0,h=!1;keyPressInit=function(f,c){t=c,f.prepend("<div id='chromeTools_keyPress'></div>"),f.attr("tabindex",1).focus().keydown(function(f){if(f.stopPropagation(),i)if(f.keyCode===i[0].charCodeAt(n)){if(r(n,!0),++n===i[0].length){$("#phrase").addClass("done");var c=i[1],l=i[2];s(),l?o(c):c(),a()}}else r(n,!1),h||s();else{for(var v=!1,p=0;p<t.length;p++)if(f.keyCode===t[p][0].charCodeAt(0)){1===t[p][0].length?t[p][1]():(i=t[p],e(t[p][0],!0),n=1),v=!0;break}if(!v){var k;if(k=f.keyCode-48,f.keyCode>=48&&f.keyCode<=57||(k=f.keyCode-96,f.keyCode>=96&&f.keyCode<=105)){for(var p=0;p<d.length;p++)if(!d[p][2]){d[p][0](k);break}}else for(var p=0;p<d.length;p++)if(d[p][1]&&f.keyCode===d[p][1].charCodeAt(0)){d[p][2]=0;break}}}}).keyup(function(e){for(var r=0;r<d.length;r++)if(d[r][1]&&e.keyCode===d[r][1].charCodeAt(0)){d[r][2]=1;break}})},addPhrase=function(e,r,a){t.push([e,r,a])},addPhrases=function(e){t=t.concat(e)},addNumberListener=function(e,r){r?d.push([e,r,1]):d.push([e])};var f}();