function block(e,n,t){var i=$("#"+blockId);i.length?(e!==currentBlock&&i.empty(),hidden&&(i.show().focus(),hidden=!1)):(i=$("<div id='"+blockId+"'></div>"),$("body").append(i));var c=document.webkitFullscreenElement;return c&&("IFRAME"===c.tagName?document.webkitExitFullscreen():(i.detach().appendTo(c),fullWait||(fullWait=!0,$(document).one("webkitfullscreenchange",function(){fullWait=!1,hidden||(i.detach().appendTo("body").focus(),$(window).trigger("resize"))})))),e!==currentBlock&&blockType(i,e,n,t)}function blockType(e,n,t,i){return currentBlock=n,"time"===n?"undefined"==typeof timeLineInit||"undefined"==typeof keyPressInit||"undefined"==typeof iframe?console.log(n+" content script missing"):(keyPressInit(e),timeLineInit(e,t),iframe(e,t.iframeUrls)):"undefined"==typeof scheduleInit?console.log(n+" content script missing"):scheduleInit(e),i(!0),!1}function unblock(){$("#"+blockId).hide(),hidden=!0}function weekSchedule(e,n){sendRequest("weekSchedule",e,n)}function sendRequest(e,n,t){chrome.runtime.sendMessage({from:"content",action:e,input:n},t)}var currentBlock,blockId="chromeTools_block",fullWait=!1,hidden=!1;chrome.runtime.onMessage.addListener(function(e,n,t){switch(e.action){case"block":return block(e.type,e.info,t);case"unblock":unblock();break;case"ping":var i={time:"undefined"!=typeof timeLineInit,schedule:"undefined"!=typeof scheduleInit};t(i)}});