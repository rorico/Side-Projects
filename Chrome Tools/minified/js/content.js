function block(e,n,t){var c;if(currentBlock?e!==currentBlock&&(c=$("#"+blockId).empty()):(c=$("<div id='"+blockId+"'></div>"),$("body").append(c)),c){var i=document.webkitFullscreenElement;return i&&("IFRAME"===i.tagName?document.webkitExitFullscreen():(c.detach().appendTo(i),fullWait||(fullWait=!0,$(document).one("webkitfullscreenchange",function(){fullWait=!1,currentBlock&&(c.detach().appendTo("body").focus(),"time"===currentBlock&&timeLineResize())})))),blockType(c,e,n,t)}return!1}function blockType(e,n,t,c){if(currentBlock=n,"time"===n)if("undefined"==typeof timeLineInit||"undefined"==typeof keyPressInit||"undefined"==typeof iframe)console.log(n+" content script missing");else{keyPressInit(e);var i=timeLineInit(e,t);iframe(i,t.iframeUrls)}else"undefined"==typeof scheduleInit?console.log(n+" content script missing"):scheduleInit(e);return c(!0),!1}function unblock(){$("#"+blockId).remove(),currentBlock=""}function weekSchedule(e,n){sendRequest("weekSchedule",e,n)}function sendRequest(e,n,t){chrome.runtime.sendMessage({from:"content",action:e,input:n},t)}var currentBlock,blockId="chromeTools_block",fullWait=!1;chrome.runtime.onMessage.addListener(function(e,n,t){switch(e.action){case"block":return block(e.type,e.info,t);case"unblock":unblock();break;case"ping":var c={time:"undefined"!=typeof timeLineInit,schedule:"undefined"!=typeof scheduleInit};t(c)}});