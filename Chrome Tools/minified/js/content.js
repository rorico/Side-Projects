function prepare(e,n){"time"===e&&("undefined"==typeof timeLineInit||"undefined"==typeof keyPressInit||"undefined"==typeof iframe?console.log(e+" content script missing"):e!==currentBlock?(keyPressInit(blockScreen),timeLineInit(blockScreen,n),iframe(blockScreen,n.iframeUrls)):iframeUpdate(n.iframeUrls,n.delay)),currentBlock=e}function block(e,n,i){var t=document.webkitFullscreenElement;return t&&("IFRAME"===t.tagName?document.webkitExitFullscreen():(blockScreen.detach().appendTo(t),$(window).trigger("resize"),fullWait||(fullWait=!0,$(document).one("webkitfullscreenchange",function(){fullWait=!1,hidden||(blockScreen.detach().appendTo("body").focus(),$(window).trigger("resize"))})))),"time"===e?"undefined"==typeof timeLineInit||"undefined"==typeof keyPressInit||"undefined"==typeof iframe?console.log(e+" content script missing"):timeLineUpdate(n):"undefined"==typeof scheduleInit?console.log(e+" content script missing"):e!==currentBlock&&scheduleInit(blockScreen),currentBlock=e,blockScreen.addClass("display").focus(),i(!0),!1}function unblock(){$("#"+blockId).removeClass("display").blur(),hidden=!0}function weekSchedule(e,n){sendRequest("weekSchedule",e,n)}function sendRequest(e,n,i){chrome.runtime.sendMessage({from:"content",action:e,input:n},i)}var currentBlock,blockId="chromeTools_block",fullWait=!1,hidden=!1,updateInfo,blockScreen=$("<div id='"+blockId+"'></div>");$("body").append(blockScreen),chrome.runtime.onMessage.addListener(function(e,n,i){switch(e.action){case"prepare":prepare(e.type,e.info);break;case"block":return block(e.type,e.info,i);case"unblock":unblock();break;case"ping":var t={time:"undefined"!=typeof timeLineInit,schedule:"undefined"!=typeof scheduleInit};i(t)}});