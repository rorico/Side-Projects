chrome.storage.sync.get("redirectIndexes",function(e){var t=2,r=6e4*(new Date).getTimezoneOffset(),n=36e5,a=6048e5,s=e.redirectIndexes;s||(s=[]),s.push("redirects");var i=[];chrome.storage.sync.get(s,function(e){e.redirects;Object.keys(e).sort().forEach(function(t){i=i.concat(e[t])}),l(t)});for(var o="",h=0;h<=t;h++){var c=t===h?" selected":"";o+="<option value='"+h+"'"+c+">"+h+"</option>"}$("#nameLevel").html(o).change(function(){l(parseInt(this.value))});var l=function(){function e(e){if(i&&i.length){for(var r=[],s={},c=0,l=o(i[0][0])-n,g=[[l,0]],u=0;u<i.length;u++){var d=t(i[u][1],e),v=o(i[u][0]),f=s[d];if(void 0===f){f=c++,s[d]=f;var p=[[v-n,0]];r.push({name:d,data:p})}var m=r[f].data;h(m,v),h(g,v)}r.push({name:"all",data:g,visible:!1});for(var x=0;x<r.length;x++){var m=r[x].data;m.push([m[m.length-1][0]+n,0])}var y=new Highcharts.Chart({chart:{renderTo:"redirects",zoomType:"x",type:"spline"},title:{text:"Redirects"},xAxis:{type:"datetime"},yAxis:{title:{text:"Number of Redirects"}},series:r,plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}}}),b=m[m.length-1][0];y.xAxis[0].setExtremes(b-a,b),y.showResetZoom()}}function t(e,t){e=e?e:"unnamed";var r=e;switch(t){case 2:r=s(e);break;case 1:var n=s(e),a="reddit.com/r/",i=e.indexOf(a);if(i!==-1){var o=e.substring(i+a.length),h=o.indexOf("/"),c=o.substring(0,h===-1?o.length:h);r=n+" -> "+c}else r=n;break;case 0:r=e}return r}function s(e){var t=e.split("/");if(t[2]){var r=t[2].split(".");return r[r.length-2]?r[r.length-2]:t[2]}return e}function o(e){var t=new Date(e);return+new Date(t.getYear(),t.getMonth(),t.getDate(),t.getHours())-r}function h(e,t){var r=e[e.length-1][0];t===r?e[e.length-1][1]++:(t-r>n&&(e.push([r+n,0]),e.push([t-n,0])),r=t,e.push([t,1]))}return e}()});