chrome.storage.sync.get("redirectIndexes",function(e){var t=2,r=6e4*(new Date).getTimezoneOffset(),n=36e5,a=e.redirectIndexes;a||(a=[]),a.push("redirects");var i=[];chrome.storage.sync.get(a,function(e){e.redirects;Object.keys(e).sort().forEach(function(t){i=i.concat(e[t])}),h(t)});for(var s="",o=0;o<=t;o++){var c=t===o?" selected":"";s+="<option value='"+o+"'"+c+">"+o+"</option>"}$("#nameLevel").html(s).change(function(){h(parseInt(this.value))});var h=function(){function e(e){if(i&&i.length){for(var r=[],a={},c=0,h=s(i[0][0])-n,l=[[h,0]],u=0;u<i.length;u++){var g=t(i[u][1],e),d=s(i[u][0]),f=a[g];if(void 0===f){f=c++,a[g]=f;var v=[[d-n,0]];r.push({name:g,data:v})}var p=r[f].data;o(p,d),o(l,d)}r.push({name:"all",data:l,visible:!1});for(var m=0;m<r.length;m++){var p=r[m].data;p.push([p[p.length-1][0]+n,0])}$("#redirects").highcharts({chart:{zoomType:"x",type:"spline"},title:{text:"Redirects"},xAxis:{type:"datetime"},yAxis:{title:{text:"Number of Redirects"}},series:r,plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}}})}}function t(e,t){e=e?e:"unnamed";var r=e;switch(t){case 2:r=a(e);break;case 1:var n=a(e),i="reddit.com/r/",s=e.indexOf(i);if(s!==-1){var o=e.substring(s+i.length),c=o.indexOf("/"),h=o.substring(0,c===-1?o.length:c);r=n+" -> "+h}else r=n;break;case 0:r=e}return r}function a(e){var t=e.split("/");if(t[2]){var r=t[2].split(".");return r[r.length-2]?r[r.length-2]:t[2]}return e}function s(e){var t=new Date(e);return+new Date(t.getYear(),t.getMonth(),t.getDate(),t.getHours())-r}function o(e,t){var r=e[e.length-1][0];t===r?e[e.length-1][1]++:(t-r>n&&(e.push([r+n,0]),e.push([t-n,0])),r=t,e.push([t,1]))}return e}()});